{
  "timestamp": "2025-09-23T22:04:35.966Z",
  "baseUrl": "http://localhost:8888",
  "totalTests": 44,
  "passedTests": 31,
  "failedTests": 13,
  "duration": 8562,
  "exitCode": 1,
  "failures": [
    {
      "test": "POST /team-verify should validate team codes",
      "file": "netlify-functions.test.js",
      "suite": "Netlify Functions E2E Tests > Team Verification",
      "endpoint": "/.netlify/functions/team-verify",
      "method": "POST",
      "function": "team-verify",
      "error": "expected 401 to be 200",
      "expectedStatus": 200,
      "actualStatus": 401,
      "timestamp": "2025-09-23T22:04:35.966Z",
      "curlCommand": "curl -s \"http://localhost:8888/.netlify/functions/team-verify\" -X POST -H \"Content-Type: application/json\" -d '{\"code\":\"ALPHA01\",\"deviceHint\":\"test-device\"}'",
      "debugging": {
        "possibleCauses": [
          "Team code not found in expected storage system",
          "Authentication failure - RLS blocking access",
          "Storage bridge not working properly"
        ],
        "recommendations": [
          "Test manually with curl command above",
          "Verify team codes exist in Supabase team_codes table",
          "Check if SupabaseTeamStorage bridge is working",
          "Review function logs for detailed error messages"
        ]
      }
    },
    {
      "test": "POST /progress-set should update progress data",
      "file": "netlify-functions.test.js",
      "suite": "Netlify Functions E2E Tests > Progress Management",
      "endpoint": "/.netlify/functions/progress-set",
      "method": "POST",
      "function": "progress-set",
      "error": "expected 400 to be 200",
      "expectedStatus": 200,
      "actualStatus": 400,
      "timestamp": "2025-09-23T22:04:35.966Z",
      "curlCommand": "curl -s \"http://localhost:8888/.netlify/functions/progress-set\" -X POST -H \"Content-Type: application/json\" -d '{\"orgId\":\"bhhs\",\"teamId\":\"berrypicker\",\"huntId\":\"fall-2025\",\"progress\":{\"covered-bridge\":{\"done\":true,\"completedAt\":\"2025-09-23T22:00:00.000Z\",\"revealedHints\":1}}}'",
      "debugging": {
        "possibleCauses": [
          "Invalid request data or missing parameters",
          "Request validation failure",
          "Storage backend not accessible (blob storage vs Supabase)"
        ],
        "recommendations": [
          "Test manually with curl command above",
          "Check request payload format matches expected schema",
          "Verify team exists in database",
          "Use progress-set-supabase function instead"
        ]
      }
    },
    {
      "test": "GET /kv-get should retrieve stored data",
      "file": "netlify-functions.test.js",
      "suite": "Netlify Functions E2E Tests > KV Store Operations",
      "endpoint": "/.netlify/functions/kv-get",
      "method": "GET",
      "function": "kv-get",
      "error": "expected 404 to be 200",
      "expectedStatus": 200,
      "actualStatus": 404,
      "timestamp": "2025-09-23T22:04:35.966Z",
      "curlCommand": "curl -s \"http://localhost:8888/.netlify/functions/kv-get?key=test-e2e-key\"",
      "debugging": {
        "possibleCauses": [
          "Function not found or not loaded",
          "Blob storage not accessible in dev environment",
          "Function file missing or not deployed"
        ],
        "recommendations": [
          "Test manually with curl command above",
          "Check health endpoint for blob storage status",
          "Verify function exists in netlify/functions directory",
          "Check Netlify dev console for function loading errors"
        ]
      }
    }
  ],
  "testFiles": [
    "tests/e2e/netlify-functions.test.js",
    "tests/e2e/supabase-integration.test.js",
    "tests/e2e/bug-001-validation.test.js"
  ]
}